 var App={loadScript:function(e){var t=$.Deferred(),n=document.getElementById("script");return n.async="async",n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(e,i){n.readyState&&!/loaded|complete/.test(n.readyState)||(i?t.reject():t.resolve())},n.onerror=function(){t.reject()},t.promise()},loadClass:function(e,t,n){window[e]?n.apply():$.getScript(baseURL+"user/"+t).done(n)},loadPage:function(e){var t=$.extend({clsName:"",url:"",script:!0},e),n=baseURL+"user/"+t.url;history.pushState(null,t.clsName,n),window[t.clsName]?window[t.clsName].show():t.script?$("#script").load(n,{isLoadScript:!0}):$("#content").load(n,{isLoadScript:!0})},clearContent:function(){if(tinymce.EditorManager.editors=[],"undefined"!=typeof tinymce&&void 0!==tinymce.editors&&tinymce.editors.length>0)for(var e=tinymce.editors.length-1;e>=0;e--)void 0!==tinymce.editors[e]&&tinymce.editors[e].remove();$("#content").empty()},permalink:function(e){var t="";return empty(e)||(t=e.replace(/ /g,"-").replace(/[&\/\\#,+()$~%.'':*?<>{}]/g,"").toLowerCase()),t},reloadsecure:function(){var e=$(".securimage");e.length>0&&e.each(function(){var t=$(this).attr("src"),n=t.indexOf("?")<=0?t.length:t.indexOf("?"),i=t.substring(0,n);e.attr("src",i+"?_dc="+Math.random())})},notify:function(e){var t;$("body").find(".notify").length<=0?(t=$("<div>",{class:"alert alert-danger notify"})).prependTo($("body")):t=$("body").find(".notify"),t.html(e),t.prepend($("<span>",{class:"fa fa-info-circle"}).css("margin-right","10px")),setTimeout(function(){t.addClass("show")},10),setTimeout(function(){t.removeClass("show")},5e3)},realtime:function(){setInterval(function(){$.ajax({url:baseURL+"notification.php",method:"POST",dataType:"json",global:!1,success:function(e){e.success&&"object"==typeof e.data&&App.refresh(e.data)}})},5e3)},refresh:function(e){"object"==typeof Ticket&&1==e.ticket&&($("#TiketPanel").is(":visible")&&Ticket.getData(),$("#PanelReply").is(":visible")&&Ticket.getReply()),App.notification(e.msg),console.info(e.msg)},notificationSend:function(e){new Notification("Informasi Web UNBK",{body:e,icon:baseURL+"assets/img/logo.png"})},notification:function(e){"function"!=typeof Notification?console.log("Notification function not exists"):"granted"===Notification.permission?App.notificationSend(e):Notification.requestPermission().then(function(t){"denied"!==t?"default"!==t?"granted"===t&&App.notificationSend(e):console.log("The permission request was dismissed."):console.log("Permission wasn not granted. Allow a retry.")})}};$(document).ready(function(){$(".js-menu").click(function(e){var t=$(this).attr("data-class"),n=$(this).attr("data-url"),i=$(this).attr("data-script"),a=$(this).attr("data-ajax"),o=$(this).attr("data-dialog")||"N";empty(n)||"#"==n||("Y"==a?("Y"!=o&&App.clearContent(),App.loadPage({clsName:t,url:n,script:i})):parent.location=baseURL+"user/"+n,$(window).width()<=1024&&!$(".menu").hasClass("hide-menu")&&$("#toggle-menu").click())}),$(".side-menu > li > a").click(function(){$(".side-menu > li > a").not($(this)).next("ul").slideUp(200),$(".side-menu > li > a").not($(this)).removeClass("active"),$(this).hasClass("active")?($(this).next("ul").slideUp(200),$(this).removeClass("active")):($(this).next("ul").slideDown(200),$(this).addClass("active"))}),$(".btn-logout").click(function(){$.ajax({dataType:"json",type:"POST",url:baseURL+"logout",success:function(e){window.location=e.url}})}),$(".btn-kembali").click(function(){parent.location=baseURL+"admin"}),$("#right-nav-button").click(function(){$("#right-nav").hasClass("show")?($("#right-nav").removeClass("show"),$(this).find(".fa").removeClass("fa-chevron-right"),$(this).find(".fa").addClass("fa-chevron-left")):($("#right-nav").addClass("show"),$(this).find(".fa").removeClass("fa-chevron-left"),$(this).find(".fa").addClass("fa-chevron-right"))}),$(document).click(function(e){var t=$(e.target),n=$(".tableLeft .navbar-collapse.in, .tableRight .navbar-collapse.in");t.hasClass("navbar-toggle")||t.parents(".navbar-collapse").hasClass("collapse in")||n.closest(".navbar").find(".navbar-toggle").trigger("click")}),$(window).scroll(function(){$(document).scrollTop()>=1?$("html").css({"touch-action":"auto"}):$("html").css({"touch-action":"pan-down"})}),$(window).resize(function(){$(this).width()<=1024?($(".menu").addClass("hide-menu"),$(".header").addClass("hide-menu"),$(".wrapper-content").addClass("hide-menu"),$("#toggle-menu").off("click"),$("#toggle-menu").click(function(){$(".menu").toggleClass("hide-menu"),$(".header").toggleClass("hide-menu"),$(".wrapper-content").toggleClass("hide-menu")})):($(".menu").removeClass("hide-menu"),$(".header").removeClass("hide-menu"),$(".wrapper-content").removeClass("hide-menu"),$("#toggle-menu").off("click"),$("#toggle-menu").click(function(){$(".menu").toggleClass("hide-menu"),$(".header").toggleClass("hide-menu"),$(".wrapper-content").toggleClass("hide-menu")}));var e=$(".menu").outerHeight(),t=$(".menu-header").outerHeight();$(".side-menu").slimScroll({height:e-t})}),$(window).resize(),Imat.init()});
